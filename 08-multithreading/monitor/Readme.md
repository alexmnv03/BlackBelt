#  Monitor synchronized блоки


Monitor - это спец механизм благодаря которому достигается корректная работа при синхроннизации
У каждого Java объекта и класса есть привязанная к нему сущность которая называется Monitor, который имеет статус свободен или занят
Если кусок кода помечен как synchronized и какой то поток заходит в него, Monitor этого объекта принимает состояние занято и больше ни какой поток не сможет работать с этим кодом, пока Monitor не станет свободным
Мледует учесть что блокировка идет на объетке или классе, а не на коде. Даже если мы ставим synchronized на метод, у метода нет монитора, поэтому используется монитор его класса или объекта

В примере SynchronizeblockOne мы видим два варианта использоввания synchronized doWorkOne и doWorkTwo
В примере doWorkOne мы не явно указываем монитор нашего обхекта MyRunOne
В примере doWorkOne мы явно указываем монитор нашего обхекта - MyRunOne , через this
Т.е. мы указываем кокой монитор будет использован для synchronized
Отличие synchronized блока от метода в том, что мы можем синхронизировать не весь метод, а лишь его часть, а остальную часть могут использовать все потоки. Т.е. если нам надо сихронизировать весь метод то следует использовать synchronized на методе, а если только его чать, то блоки

В примере SynchronizeblockTwo используется монитор всего класса, т.к. у нас татичный метод и мы не можем использовать монитор обьекта
Мы так же видим два варианта испоьзования synchronized на метода и на блоке

SynchronizeblockThree - рассомотрен вариант синхронизации по одному объекту нескольких методов
Т.е. у нас есть три потока и два метода, оба метода мы синхронизируем по обному объекту и когда любой поток заходит в любой из методов мы блокируем их оба. На пример звонков по скайпу, телефону и вацапу
Но мы видим
Так не работает, т.к. мы видим по this, что совершенно разные и полэтому мониторы тоже будут разные
А нам необходимо, чтобы синхронизация шла по одному объекту
Поэтому используем для этого одни объект и блоки
Смотрим второй вариант примера, когда мы создаем объект класса Car и указываем всем потокам его монитор
Но так обычно не делают, что бы не создавать специальный класс можно создать просто переменную см третий вариант в коде lock

Вот шаблон synchronized блока

```
static final Object lock = new Object();
public void abs()  {
    synchronized (lock){
        block body
    }
}
```

Нет возможности синхронизировать конструктор!!!




